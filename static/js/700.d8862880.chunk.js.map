{"version":3,"file":"static/js/700.d8862880.chunk.js","mappings":"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","sources":["components/product/Product.tsx","store/actions/filterActions.tsx","store/reducers/filterReducer.tsx","webpack://shopify/./src/pages/products/filter/Filter.module.css?37e0","pages/products/filter/option-panel/OptionPanel.tsx","pages/products/filter/Filter.tsx","pages/products/Products.tsx"],"sourcesContent":["import React, { useContext } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { AppContext } from '../../App'\r\nimport { openQuickView } from '../../redux/quickview/actions'\r\nimport { AppActions } from '../../store/actions/actions'\r\nimport {ProductType} from \"../../type/product\"\r\nimport \"./Product.css\"\r\n\r\nfunction Product({product} : {product: ProductType}) {\r\n  // const {dispatch} = useContext(AppContext)!\r\n  const dispatch = useDispatch()\r\n  \r\n  const {\r\n      featuredImage,\r\n      handle,\r\n      title,\r\n      variants,\r\n      vendor, \r\n      price,\r\n      images\r\n  } = product\r\n\r\n  const secondImage = images[1].url\r\n  \r\n  const handleOpenQuickView = () => {\r\n    // dispatch({type: AppActions.OPEN_QUICKVIEW})\r\n    // dispatch({type: AppActions.SET_QUICKVIEW_HANDLE, payload: handle})\r\n    // dispatch({type: AppActions.OPEN_SIDEBAR})\r\n    dispatch(openQuickView(handle))\r\n  }\r\n    \r\n  return (\r\n    <div className={'product-wrapper'}>\r\n        <div className={\"img-wrapper\"}>\r\n          <div className=\"quick-view-wrapper\" onClick={handleOpenQuickView}>\r\n            <div className=\"quick-view\">\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" className=\"quick-view-icon\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M9.96205 9.96248L12.9996 13M11.4999 6.24997C11.4999 9.14945 9.14945 11.4999 6.24997 11.4999C3.35049 11.4999 1 9.14945 1 6.24997C1 3.35049 3.35049 1 6.24997 1C9.14945 1 11.4999 3.35049 11.4999 6.24997Z\" stroke=\"var(--background-color--1)\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"></path>\r\n              </svg>\r\n            </div>\r\n            <div className=\"quick-view-hover\">\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" className=\"quick-view-icon-hover\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M9.96205 9.96248L12.9996 13M11.4999 6.24997C11.4999 9.14945 9.14945 11.4999 6.24997 11.4999C3.35049 11.4999 1 9.14945 1 6.24997C1 3.35049 3.35049 1 6.24997 1C9.14945 1 11.4999 3.35049 11.4999 6.24997Z\" stroke=\"var(--background-color--2)\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"></path>\r\n              </svg>\r\n              <span>quick view</span>\r\n            </div>\r\n          </div>\r\n          <Link to={`/products/${handle}`}>\r\n              <img className=\"lazyload\" src={featuredImage} alt={handle} />\r\n              <img className=\"lazyload second-img\" src={secondImage} alt={`${handle}-2`} />\r\n          </Link>\r\n        </div>\r\n        <div className={\"content-wrapper\"}>\r\n          <p className={'vendor'}>{vendor}</p>\r\n          <Link className={'title'} to={`/products/${handle}`}>\r\n            {title}\r\n          </Link>\r\n          <p className={'price'}>${price}.00</p>\r\n          <div className={\"colors\"}></div>\r\n          <div className={\"review\"}></div>\r\n        </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Product","export enum FilterActions{\r\n    SET_MIN_PRICE = \"SET_MIN_PRICE\",\r\n    SET_MAX_PRICE = \"SET_MAX_PRICE\",\r\n    SET_COLOR = \"SET_COLOR\",\r\n    SET_SIZE = \"SET_SIZE\",\r\n}","import { Reducer } from \"react\";\r\nimport { IAction, IFilter } from \"../../type/global\";\r\nimport { FilterActions } from \"../actions/filterActions\";\r\n\r\nexport const filterReducer: Reducer<IFilter, IAction<any>> = (state, {type, payload}) => {\r\n    switch (type) {\r\n        case FilterActions.SET_MIN_PRICE:\r\n            return {\r\n                ...state,\r\n                minPrice: payload\r\n            }\r\n        case FilterActions.SET_MAX_PRICE:\r\n            return {\r\n                ...state,\r\n                maxPrice: payload\r\n            }\r\n        case FilterActions.SET_COLOR:\r\n            return {\r\n                ...state,\r\n                color: payload\r\n            }\r\n        case FilterActions.SET_SIZE:\r\n            return {\r\n                ...state,\r\n                size: payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"filter-wrapper\":\"Filter_filter-wrapper__2tk5v\",\"filter-option\":\"Filter_filter-option__k1ySX\",\"color-option\":\"Filter_color-option__q2jkO\",\"size-option\":\"Filter_size-option__r2tHz\",\"selected-tags\":\"Filter_selected-tags__IGNKQ\"};","import React, { useEffect, useState } from 'react'\r\nimport \"./OptionPanel.css\"\r\n\r\ntype Props = {\r\n  children: JSX.Element, \r\n  selectedCount: number, \r\n  handleReset: ()=>void, \r\n  open: boolean, \r\n  option: string,\r\n  resetOptionPanel: ()=>void\r\n}\r\n\r\nfunction OptionPanel({children, selectedCount, handleReset, open, option, resetOptionPanel}: Props) {\r\n  const [isOpen, setIsOpen] = useState<boolean>(open)\r\n\r\n  useEffect(() => {\r\n    if (open) setIsOpen(open)\r\n\r\n    const handleClickOutside = (e: Event) => {\r\n      if (!isOpen) return\r\n      const target = e.target as HTMLElement\r\n\r\n      if (!target.classList.contains(\"option-label\") && !target.closest(\".option-panel\") || target.classList.contains(\"option-label\") && !target.classList.contains(option) ) {\r\n        setIsOpen(false)\r\n        resetOptionPanel()\r\n        removeClickOutside()\r\n      }\r\n    }\r\n    const removeClickOutside = () => {\r\n      document.removeEventListener(\"click\", handleClickOutside)\r\n    }\r\n\r\n    if (isOpen) document.addEventListener(\"click\", handleClickOutside)\r\n    \r\n    return () => {\r\n      removeClickOutside()\r\n    }\r\n  }, [isOpen, open])\r\n  \r\n  return (\r\n    <div className={`option-panel ${isOpen?\"open\":\"\"}`}>\r\n        <div className=\"option-content\">\r\n            {children}\r\n        </div>\r\n        <div className=\"footer\">\r\n            <p>{selectedCount} selected</p>\r\n            <button className='reset-btn' onClick={handleReset}>Reset</button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OptionPanel","import React, { ChangeEvent, Dispatch, MouseEvent, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { MouseEventHandler } from 'react'\r\nimport { FilterActions } from '../../../store/actions/filterActions'\r\nimport { IAction, IFilter } from '../../../type/global'\r\nimport { ProductType } from '../../../type/product'\r\nimport { Options } from '../Products'\r\nimport styles from \"./Filter.module.css\"\r\nimport \"./Filter.css\"\r\nimport OptionPanel from './option-panel/OptionPanel'\r\n        \r\ntype OptionPanel = {\r\n  availability: boolean,\r\n  price: boolean,\r\n  colors: boolean,\r\n  sizes: boolean\r\n}\r\n\r\nconst initOptionPanelState = {\r\n  availability: false,\r\n  price: false,\r\n  colors: false,\r\n  sizes: false\r\n}\r\n\r\nfunction Filter({products, colors, sizes, filterState, filterDispatch}: {products: ProductType[], colors: Options, sizes: Options, filterState: IFilter, filterDispatch: Dispatch<IAction<any>>}) {\r\n  const [optionPanel, setOptionPanel] = useState<OptionPanel>(initOptionPanelState)\r\n  \r\n  const colorMap = useMemo(() => {\r\n    const _colorMap: {value: string, quantity: number}[] = []\r\n    for (let color in colors) {\r\n      const pair = {value: color, quantity: colors[color]}\r\n      _colorMap.push(pair)\r\n    }\r\n    return _colorMap\r\n  }, [colors])\r\n  \r\n  const sizeMap = useMemo(() => {\r\n    const _sizeMap: {value: string, quantity: number}[] = []\r\n    for (let size in sizes) {\r\n      const pair = {value: size, quantity: sizes[size]}\r\n      _sizeMap.push(pair)\r\n    }\r\n    return _sizeMap\r\n  }, [sizes])\r\n\r\n  const inStock = useMemo(() => {\r\n    return products.reduce<number>((count, product) => {\r\n      if (product.totalInventory > 0) count++\r\n      return count\r\n    }, 0)\r\n  }, [products])\r\n\r\n  const outOfStock = useMemo(() => {\r\n    return products.length - inStock\r\n  }, [products, inStock])\r\n  \r\n  const resetOptionPanel = () => {\r\n    setOptionPanel(initOptionPanelState)\r\n  }\r\n\r\n  const handleMinPrice = (e: ChangeEvent<HTMLInputElement>) => {\r\n    filterDispatch({type: FilterActions.SET_MIN_PRICE, payload: Number(e.target.value)})\r\n  }\r\n  \r\n  const handleMaxPrice = (e: ChangeEvent<HTMLInputElement>) => {\r\n    filterDispatch({type: FilterActions.SET_MAX_PRICE, payload: Number(e.target.value)})\r\n  }\r\n\r\n  const handleColor = (e: MouseEvent<HTMLSpanElement>) => {\r\n    const target = e.target as HTMLElement\r\n    filterDispatch({type: FilterActions.SET_COLOR, payload: target.dataset.name})\r\n  }\r\n\r\n  const handleSize = (e: MouseEvent<HTMLSpanElement>) => {\r\n    const target = e.target as HTMLElement\r\n    filterDispatch({type: FilterActions.SET_SIZE, payload: target.dataset.name})\r\n  }\r\n  \r\n  const resetSize = () => filterDispatch({type: FilterActions.SET_SIZE, payload: \"\"})\r\n\r\n  const resetColor = () => filterDispatch({type: FilterActions.SET_COLOR, payload: \"\"})\r\n  \r\n  const resetPrices = () => {\r\n    filterDispatch({type: FilterActions.SET_MIN_PRICE, payload: 0})\r\n    filterDispatch({type: FilterActions.SET_MAX_PRICE, payload: 1000})\r\n  }\r\n  \r\n  const {minPrice, maxPrice, color, size} = filterState\r\n  const showPricesTag = !(minPrice===0&&maxPrice===1000) && (minPrice < maxPrice)\r\n\r\n  const togglePanel = (name: string) => {\r\n    setOptionPanel({...optionPanel, [name]: !optionPanel[name as keyof OptionPanel]})\r\n  }\r\n\r\n  return (\r\n    <div className={styles[\"filter-wrapper\"]}>\r\n      <div className=\"filter-options\">\r\n      <strong>Filter:</strong>\r\n        <div className={` ${styles[\"filter-option\"]}`} onClick={() => togglePanel(\"availability\")}>\r\n          <strong className=\"option-label availability\">Availability<span className='dropdown-btn'></span></strong> \r\n          <OptionPanel handleReset={()=>{}} selectedCount={0} open={optionPanel.availability} option=\"availability\" resetOptionPanel={resetOptionPanel}>\r\n            <>\r\n              <div className=\"input-wrapper\">\r\n                <input type=\"checkbox\"/><p>In stock {`(${inStock})`}</p> \r\n              </div>\r\n              <div className=\"input-wrapper\">\r\n                <input type=\"checkbox\"/><p>Out of stock {`(${outOfStock})`}</p> \r\n              </div>\r\n            </>\r\n          </OptionPanel>\r\n        </div>\r\n        <div className={`${styles[\"filter-option\"]}`} onClick={() => togglePanel(\"price\")}>\r\n          <strong className=\"option-label price\">Price<span className='dropdown-btn'></span></strong>\r\n          <OptionPanel handleReset={()=>{}} selectedCount={0} open={optionPanel.price} option=\"price\" resetOptionPanel={resetOptionPanel}>\r\n            <>\r\n              From {minPrice} \r\n              <input type=\"range\" onChange={handleMinPrice} value={minPrice}/>\r\n              To {maxPrice}  \r\n              <input type=\"range\" onChange={handleMaxPrice} value={maxPrice}/>\r\n            </>\r\n          </OptionPanel>\r\n        </div>\r\n        <div className={`${styles[\"filter-option\"]}`} onClick={() => togglePanel(\"colors\")}>\r\n          <strong className=\"option-label colors\">Colors<span className='dropdown-btn'></span></strong>\r\n          <OptionPanel handleReset={()=>{}} selectedCount={0} open={optionPanel.colors} option=\"colors\" resetOptionPanel={resetOptionPanel}>\r\n            <>\r\n              {colorMap.map(({value, quantity}) => (\r\n                <span onClick={handleColor} data-name={value} className={styles['color-option']} key={value}>{`${value} (${quantity})`}</span>\r\n              ))}\r\n            </>\r\n          </OptionPanel>\r\n        </div>\r\n        <div className={`${styles[\"filter-option\"]}`} onClick={() => togglePanel(\"sizes\")}>\r\n          <strong className=\"option-label sizes\">Sizes<span className='dropdown-btn'></span></strong>\r\n          <OptionPanel handleReset={()=>{}} selectedCount={0} open={optionPanel.sizes} option=\"sizes\" resetOptionPanel={resetOptionPanel}>\r\n            <>\r\n              {sizeMap.map(({value, quantity}) => (\r\n                <span onClick={handleSize} data-name={value} className={styles['size-option']} key={value}>{`${value} (${quantity})`}</span>\r\n              ))}\r\n            </>\r\n          </OptionPanel>\r\n        </div>\r\n      </div>\r\n        \r\n      <div className={\"selected-tags\"}>\r\n        {showPricesTag&&<span className='selected-tag' onClick={resetPrices}>{minPrice}-{maxPrice} x</span>}\r\n        {color&&<span className='selected-tag' onClick={resetColor}>{color} x</span>}\r\n        {size&&<span className='selected-tag' onClick={resetSize}>{size} x</span>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React, { useEffect, useReducer, useRef, useState } from 'react'\r\nimport { BASE_URL } from '../../App'\r\nimport Product from '../../components/product/Product'\r\nimport { FilterActions } from '../../store/actions/filterActions'\r\nimport { filterReducer } from '../../store/reducers/filterReducer'\r\nimport { IFilter } from '../../type/global'\r\nimport {ProductType} from \"../../type/product\"\r\nimport Filter from './filter/Filter'\r\nimport \"./Products.css\"\r\n\r\nexport type Options = {[key: string]: number}\r\n\r\nconst initFilter: IFilter = {\r\n    minPrice: 0,\r\n    maxPrice: 1000,\r\n    color: \"\",\r\n    size: \"\"\r\n}\r\n\r\nfunction Products() {\r\n    const [products, setProducts] = useState<ProductType[]>([])\r\n    const [sizes, setSizes] = useState<Options>({})\r\n    const [colors, setColors] = useState<Options>({})\r\n    const [filterState, filterDispatch] = useReducer(filterReducer, initFilter)\r\n    const firstRender = useRef<number>(0)\r\n    const {minPrice, maxPrice, color, size} = filterState\r\n\r\n    useEffect(() => {\r\n        fetchAllVariants()\r\n    }, [])\r\n\r\n    const timeRef = useRef<NodeJS.Timeout|null>(null)\r\n\r\n    useEffect(() => {\r\n        if (firstRender.current<=1) {\r\n            firstRender.current++\r\n            return\r\n        }\r\n        \r\n        if (timeRef.current) {\r\n            clearTimeout(timeRef.current)\r\n          }\r\n          timeRef.current = setTimeout(() => {\r\n            if (typeof minPrice === \"number\" && typeof maxPrice === \"number\" && (minPrice < maxPrice)) fetchData()\r\n          }, 1000);\r\n\r\n    }, [minPrice, maxPrice])\r\n\r\n    useEffect(() => {\r\n        if (firstRender.current<=1) {\r\n            firstRender.current++\r\n            return\r\n        }\r\n\r\n        if (typeof minPrice === \"number\" && typeof maxPrice === \"number\" && (minPrice < maxPrice)) fetchData()\r\n    }, [color, size])\r\n\r\n    const fetchData = async () => {\r\n        let url: string = `${BASE_URL}/product-variants?minPrice=${minPrice}&maxPrice=${maxPrice}${color&&`&color=${color}`}${size&&`&size=${size}`}`\r\n\r\n        const res = await fetch(url)\r\n        const data: {products: any, colors: Options, sizes: Options} = await res.json()\r\n        const {products, colors, sizes} = data\r\n        \r\n        if (products && products.length > 0) setProducts(products)\r\n        if (Object.keys(colors).length > 0) setColors(colors)\r\n        if (Object.keys(sizes).length > 0) setSizes(sizes)\r\n    }\r\n\r\n    const fetchAllVariants = async() => {\r\n        const res = await fetch(`${BASE_URL}/product-variants/all`)\r\n        const data = await res.json()\r\n        const {products, colors, sizes} = data\r\n\r\n        if (products && products.length > 0) setProducts(products)\r\n        if (Object.keys(colors).length > 0) setColors(colors)\r\n        if (Object.keys(sizes).length > 0) setSizes(sizes)\r\n    }\r\n    \r\n  return products.length === 0 ? <h1>\"Loading...\"</h1> : (\r\n    <div className='products-page'>\r\n        <Filter filterState={filterState} filterDispatch={filterDispatch} products={products} colors={colors} sizes={sizes}/>\r\n        <div className=\"products-container\">\r\n            {products.map(product => (\r\n                <Product key={product.id} product={product}/>\r\n            ))}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Products "],"names":["product","dispatch","useDispatch","featuredImage","handle","title","vendor","variants","price","secondImage","images","url","className","onClick","openQuickView","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","to","src","alt","FilterActions","filterReducer","state","type","payload","SET_MIN_PRICE","minPrice","SET_MAX_PRICE","maxPrice","SET_COLOR","color","SET_SIZE","size","children","selectedCount","handleReset","open","option","resetOptionPanel","useState","isOpen","setIsOpen","useEffect","handleClickOutside","e","target","classList","contains","closest","removeClickOutside","document","removeEventListener","addEventListener","initOptionPanelState","availability","colors","sizes","products","filterState","filterDispatch","optionPanel","setOptionPanel","colorMap","useMemo","_colorMap","pair","value","quantity","push","sizeMap","_sizeMap","inStock","reduce","count","totalInventory","outOfStock","length","handleColor","dataset","name","handleSize","showPricesTag","togglePanel","styles","onChange","Number","map","initFilter","setProducts","setSizes","setColors","useReducer","firstRender","useRef","fetchAllVariants","timeRef","current","clearTimeout","setTimeout","fetchData","BASE_URL","fetch","res","json","data","Object","keys","Product","id"],"sourceRoot":""}